var bulmaSteps=function(){'use strict';const a=['click','touchstart'];class b{constructor(a=null,b={}){this.options=Object.assign({},{selector:'.step-item',selector_content:'.step-content',previous_selector:'[data-nav="previous"]',next_selector:'[data-nav="next"]',active_class:'is-active',completed_class:'is-completed',beforeNext:null,onShow:null,onFinish:null,onError:null},b),this.element=a,this.steps=a.querySelectorAll(this.options.selector),this.contents=a.querySelectorAll(this.options.selector_content),this.previous_btn=a.querySelector(this.options.previous_selector),this.next_btn=a.querySelector(this.options.next_selector),this.init()}static attach(a='.steps',c={}){let d=[];const e=document.querySelectorAll(a);return[].forEach.call(e,(a)=>{setTimeout(()=>{d.push(new b(a,c))},100)}),d}init(){for(var a,b=0;b<this.steps.length;b++)a=this.steps[b],a.setAttribute('data-step-id',b);this.bind(),this.start()}bind(){var b=this;null!=this.previous_btn&&a.forEach((a)=>{this.previous_btn.addEventListener(a,function(a){a.preventDefault(),a.target.getAttribute('disabled')||b.previous_step()})}),null!=this.next_btn&&a.forEach((a)=>{this.next_btn.addEventListener(a,function(a){a.preventDefault(),a.target.getAttribute('disabled')||b.next_step()})})}start(){this.activate_step(0),this.updateActions(this.steps[0])}get_current_step_id(){for(var a,b=0;b<this.steps.length;b++)if(a=this.steps[b],a.classList.contains(this.options.active_class))return parseInt(a.getAttribute('data-step-id'));return null}updateActions(a){var b=parseInt(a.getAttribute('data-step-id'));0==b?(null!=this.previous_btn&&this.previous_btn.setAttribute('disabled','disabled'),null!=this.next_btn&&this.next_btn.removeAttribute('disabled','disabled')):b==this.steps.length-1?(null!=this.previous_btn&&this.previous_btn.removeAttribute('disabled','disabled'),null!=this.next_btn&&this.next_btn.setAttribute('disabled','disabled')):(null!=this.previous_btn&&this.previous_btn.removeAttribute('disabled','disabled'),null!=this.next_btn&&this.next_btn.removeAttribute('disabled','disabled'))}next_step(){var a=this.get_current_step_id();if(null!=a){var b=a+1,c=[];if('undefined'!=typeof this.options.beforeNext&&null!=this.options.beforeNext&&this.options.beforeNext&&(c=this.options.beforeNext(a)),'undefined'==typeof c&&(c=[]),0<c.length){for(var d=0;d<c.length;d++)'undefined'!=typeof this.options.onError&&null!=this.options.onError&&this.options.onError&&this.options.onError(c[d]);return}b>=this.steps.length?('undefined'!=typeof this.options.onFinish&&null!=this.options.onFinish&&this.options.onFinish&&this.options.onFinish(a),this.deactivate_step(a)):(this.complete_step(a),this.activate_step(b))}}previous_step(){var a=this.get_current_step_id();null==a||(this.uncomplete_step(a-1),this.activate_step(a-1))}activate_step(a){this.updateActions(this.steps[a]);for(var b,c=0;c<this.steps.length;c++)(b=this.steps[c],b!=this.steps[a])&&this.deactivate_step(c);this.steps[a].classList.add(this.options.active_class),'undefined'!=typeof this.contents[a]&&this.contents[a].classList.add(this.options.active_class),'undefined'!=typeof this.options.onShow&&null!=this.options.onShow&&this.options.onShow&&this.options.onShow(a)}complete_step(a){this.steps[a].classList.add(this.options.completed_class)}uncomplete_step(a){this.steps[a].classList.remove(this.options.completed_class)}deactivate_step(a){this.steps[a].classList.remove(this.options.active_class),'undefined'!=typeof this.contents[a]&&this.contents[a].classList.remove(this.options.active_class)}}return b}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,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QyxBQUNwRSxhQUNGLEFBQ0YiLCJmaWxlIjoiYnVsbWEtc3RlcHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTU9VU0VfRVZFTlRTID0gWydjbGljaycsICd0b3VjaHN0YXJ0J107XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0ZXBzV2l6YXJkIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICdzZWxlY3Rvcic6ICcuc3RlcC1pdGVtJyxcbiAgICAgICdzZWxlY3Rvcl9jb250ZW50JzogJy5zdGVwLWNvbnRlbnQnLFxuICAgICAgJ3ByZXZpb3VzX3NlbGVjdG9yJzogJ1tkYXRhLW5hdj1cInByZXZpb3VzXCJdJyxcbiAgICAgICduZXh0X3NlbGVjdG9yJzogJ1tkYXRhLW5hdj1cIm5leHRcIl0nLFxuICAgICAgJ2FjdGl2ZV9jbGFzcyc6ICdpcy1hY3RpdmUnLFxuICAgICAgJ2NvbXBsZXRlZF9jbGFzcyc6ICdpcy1jb21wbGV0ZWQnLFxuICAgICAgJ2JlZm9yZU5leHQnOiBudWxsLFxuICAgICAgJ29uU2hvdyc6IG51bGwsXG4gICAgICAnb25GaW5pc2gnOiBudWxsLFxuICAgICAgJ29uRXJyb3InOiBudWxsXG4gICAgfSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuc3RlcHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vcHRpb25zLnNlbGVjdG9yKTtcbiAgICB0aGlzLmNvbnRlbnRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5zZWxlY3Rvcl9jb250ZW50KTtcbiAgICB0aGlzLnByZXZpb3VzX2J0biA9IGVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMucHJldmlvdXNfc2VsZWN0b3IpO1xuICAgIHRoaXMubmV4dF9idG4gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLm5leHRfc2VsZWN0b3IpO1xuXG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhdGUgYWxsIERPTSBlbGVtZW50IGNvbnRhaW5pbmcgdGFnc2lucHV0IGNsYXNzXG4gICAqIEBtZXRob2RcbiAgICogQHJldHVybiB7QXJyYXl9IEFycmF5IG9mIGFsbCBUYWdzSW5wdXQgaW5zdGFuY2VzXG4gICAqL1xuICBzdGF0aWMgYXR0YWNoKHNlbGVjdG9yID0gJy5zdGVwcycsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBzdGVwc0luc3RhbmNlcyA9IG5ldyBBcnJheSgpO1xuXG4gICAgY29uc3Qgc3RlcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICBbXS5mb3JFYWNoLmNhbGwoc3RlcHMsIHN0ZXAgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHN0ZXBzSW5zdGFuY2VzLnB1c2gobmV3IFN0ZXBzV2l6YXJkKHN0ZXAsIG9wdGlvbnMpKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0ZXBzSW5zdGFuY2VzO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzdGVwID0gdGhpcy5zdGVwc1tpXTtcblxuICAgICAgc3RlcC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RlcC1pZCcsIGkpO1xuICAgIH1cblxuICAgIHRoaXMuYmluZCgpO1xuXG4gICAgdGhpcy5zdGFydCgpO1xuICB9XG5cbiAgYmluZCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMucHJldmlvdXNfYnRuICE9IG51bGwpIHtcbiAgICAgIE1PVVNFX0VWRU5UUy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmICghZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICBfdGhpcy5wcmV2aW91c19zdGVwKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm5leHRfYnRuICE9IG51bGwpIHtcbiAgICAgIE1PVVNFX0VWRU5UUy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLm5leHRfYnRuLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgaWYgKCFlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgIF90aGlzLm5leHRfc3RlcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICB0aGlzLmFjdGl2YXRlX3N0ZXAoMCk7XG4gICAgdGhpcy51cGRhdGVBY3Rpb25zKHRoaXMuc3RlcHNbMF0pO1xuICB9XG5cbiAgZ2V0X2N1cnJlbnRfc3RlcF9pZCgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzdGVwID0gdGhpcy5zdGVwc1tpXTtcblxuICAgICAgaWYgKHN0ZXAuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMub3B0aW9ucy5hY3RpdmVfY2xhc3MpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChzdGVwLmdldEF0dHJpYnV0ZSgnZGF0YS1zdGVwLWlkJykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdXBkYXRlQWN0aW9ucyhzdGVwKSB7XG4gICAgdmFyIHN0ZXBJZCA9IHBhcnNlSW50KHN0ZXAuZ2V0QXR0cmlidXRlKCdkYXRhLXN0ZXAtaWQnKSk7XG4gICAgaWYgKHN0ZXBJZCA9PSAwKSB7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c19idG4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5uZXh0X2J0biAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmV4dF9idG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3RlcElkID09ICh0aGlzLnN0ZXBzLmxlbmd0aCAtIDEpKSB7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c19idG4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5uZXh0X2J0biAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmV4dF9idG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c19idG4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5uZXh0X2J0biAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmV4dF9idG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5leHRfc3RlcCgpIHtcbiAgICB2YXIgY3VycmVudF9pZCA9IHRoaXMuZ2V0X2N1cnJlbnRfc3RlcF9pZCgpO1xuXG4gICAgaWYgKGN1cnJlbnRfaWQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0X2lkID0gY3VycmVudF9pZCArIDEsXG4gICAgICBlcnJvcnMgPSBbXTtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmJlZm9yZU5leHQgIT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5vcHRpb25zLmJlZm9yZU5leHQgIT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMuYmVmb3JlTmV4dCkge1xuICAgICAgZXJyb3JzID0gdGhpcy5vcHRpb25zLmJlZm9yZU5leHQoY3VycmVudF9pZCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlcnJvcnMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVycm9ycyA9IFtdO1xuICAgIH1cblxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25FcnJvciAhPSAndW5kZWZpbmVkJyAmJiB0aGlzLm9wdGlvbnMub25FcnJvciAhPSBudWxsICYmIHRoaXMub3B0aW9ucy5vbkVycm9yKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uRXJyb3IoZXJyb3JzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5leHRfaWQgPj0gdGhpcy5zdGVwcy5sZW5ndGgpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uRmluaXNoICE9ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vbkZpbmlzaCAhPSBudWxsICYmIHRoaXMub3B0aW9ucy5vbkZpbmlzaCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMub25GaW5pc2goY3VycmVudF9pZCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRlYWN0aXZhdGVfc3RlcChjdXJyZW50X2lkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21wbGV0ZV9zdGVwKGN1cnJlbnRfaWQpO1xuICAgICAgdGhpcy5hY3RpdmF0ZV9zdGVwKG5leHRfaWQpO1xuICAgIH1cbiAgfVxuXG4gIHByZXZpb3VzX3N0ZXAoKSB7XG4gICAgdmFyIGN1cnJlbnRfaWQgPSB0aGlzLmdldF9jdXJyZW50X3N0ZXBfaWQoKTtcbiAgICBpZiAoY3VycmVudF9pZCA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51bmNvbXBsZXRlX3N0ZXAoY3VycmVudF9pZCAtIDEpO1xuICAgIHRoaXMuYWN0aXZhdGVfc3RlcChjdXJyZW50X2lkIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGUgYSBzaW5nbGUgc3RlcCxcbiAgICogd2lsbCBkZWFjdGl2YXRlIGFsbCBvdGhlciBzdGVwcy5cbiAgICovXG4gIGFjdGl2YXRlX3N0ZXAoc3RlcF9pZCkge1xuICAgIHRoaXMudXBkYXRlQWN0aW9ucyh0aGlzLnN0ZXBzW3N0ZXBfaWRdKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIF9zdGVwID0gdGhpcy5zdGVwc1tpXTtcblxuICAgICAgaWYgKF9zdGVwID09IHRoaXMuc3RlcHNbc3RlcF9pZF0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGVhY3RpdmF0ZV9zdGVwKGkpO1xuICAgIH1cblxuICAgIHRoaXMuc3RlcHNbc3RlcF9pZF0uY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuYWN0aXZlX2NsYXNzKTtcbiAgICBpZiAodHlwZW9mIHRoaXMuY29udGVudHNbc3RlcF9pZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmNvbnRlbnRzW3N0ZXBfaWRdLmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLmFjdGl2ZV9jbGFzcyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25TaG93ICE9ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vblNob3cgIT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMub25TaG93KSB7XG4gICAgICB0aGlzLm9wdGlvbnMub25TaG93KHN0ZXBfaWQpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBsZXRlX3N0ZXAoc3RlcF9pZCkge1xuICAgIHRoaXMuc3RlcHNbc3RlcF9pZF0uY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuY29tcGxldGVkX2NsYXNzKTtcbiAgfVxuXG4gIHVuY29tcGxldGVfc3RlcChzdGVwX2lkKSB7XG4gICAgdGhpcy5zdGVwc1tzdGVwX2lkXS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3B0aW9ucy5jb21wbGV0ZWRfY2xhc3MpO1xuICB9XG5cbiAgZGVhY3RpdmF0ZV9zdGVwKHN0ZXBfaWQpIHtcbiAgICB0aGlzLnN0ZXBzW3N0ZXBfaWRdLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5vcHRpb25zLmFjdGl2ZV9jbGFzcyk7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbnRlbnRzW3N0ZXBfaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5jb250ZW50c1tzdGVwX2lkXS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3B0aW9ucy5hY3RpdmVfY2xhc3MpO1xuICAgIH1cbiAgfVxufVxuIl19
